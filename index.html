<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Debug Racer</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Camera rig -->
      <a-entity id="rig" position="0 1.6 0">
        <a-entity id="camera" camera look-controls wasd-controls="acceleration: 0"></a-entity>
      </a-entity>

      <!-- Car entity with controller -->
      <a-entity id="car" position="0 0 0" car-controller></a-entity>

      <!-- Ground -->
      <a-plane rotation="-90 0 0" width="100" height="100" color="#333"></a-plane>

      <script>
        AFRAME.registerComponent('car-controller', {
          init: function () {
            this.velocity = 0;
            this.direction = new THREE.Vector3(0, 0, -1);
            this.speed = 5;
            console.log("Car controller initialized");
          },
          tick: function (time, delta) {
            const dt = delta / 1000;
            this.velocity = this.speed;
            const move = this.direction.clone().multiplyScalar(this.velocity * dt);
            this.el.object3D.position.add(move);
            document.querySelector('#rig').object3D.position.copy(this.el.object3D.position);
            console.log("Car position:", this.el.object3D.position);
          }
        });
      </script>
    </a-scene>
  </body>
</html>
